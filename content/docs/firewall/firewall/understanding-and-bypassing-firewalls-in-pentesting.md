---
title: "Understanding and Bypassing Firewalls in Pentesting"
description: "This tutorial explores firewall evasion techniques commonly used in penetration testing to assess network security effectively."
image: "https://armur-ai.github.io/armur-blog-pentest/images/security-fundamentals.png"
icon: "code"
draft: false
---

## Introduction:
Firewalls are a crucial security component in network infrastructure, designed to prevent unauthorized access to internal resources. This tutorial delves into the techniques used by penetration testers to understand and bypass firewalls during security assessments.

## 1. Understanding Firewall Functionality
Firewalls filter network traffic based on pre-defined rules.

**Common Firewall Types:**
- **Packet filtering firewalls:** Examine individual packets and block or allow them based on source/destination IP address, port, and protocol.
- **Stateful inspection firewalls:** Track the state of network connections and make filtering decisions based on the context of the traffic.
- **Application-layer firewalls (Web Application Firewalls - WAFs):** Analyze application-level data and block malicious requests.

## 2. Firewall Evasion Techniques in Penetration Testing
Penetration testers employ various techniques to bypass firewall restrictions.

**Port Scanning and Banner Grabbing:**
- Use Nmap to identify open ports and running services.
- Employ banner grabbing techniques to gather information about the firewall and its configuration.

**Fragmentation:**
- Split packets into smaller fragments to bypass firewall rules that inspect only the first fragment.
- Example: `nmap -f <target>`

**Source Port Manipulation:**
- Use high-numbered source ports that are often allowed through firewalls.
- Example: `nmap -g 50000 <target>`

**Tunneling:**
- Encapsulate traffic within another protocol (e.g., SSH, VPN) to bypass firewall filtering.
- Example: SSH tunneling to access restricted resources.

**Protocol Spoofing:**
- Disguise traffic as a different protocol (e.g., DNS tunneling).
- Example: `iodine` for DNS tunneling.

**Application-Layer Evasion:**
- Craft HTTP requests that bypass WAF rules using techniques like encoding, obfuscation, and parameter manipulation.

## 3. Tools for Firewall Evasion
- **Nmap:** Versatile network scanner with options for fragmentation, source port manipulation, and decoy scans.
- **Hping3:** Packet crafting tool for sending custom packets and testing firewall rules.
- **Proxychains:** Redirects traffic through a chain of proxies to bypass firewalls and remain anonymous.
- **Burp Suite:** Web application testing tool for manipulating HTTP requests and bypassing WAFs.

## Conclusion:
Understanding firewall functionality and evasion techniques is crucial for penetration testers to assess network security effectively. This tutorial provided an overview of common methods used to bypass firewalls during ethical penetration testing engagements. Continuous learning and practice are essential to stay up-to-date with evolving firewall technologies and evasion strategies.